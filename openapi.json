{"openapi":"3.1.0","info":{"title":"app_name","description":"API for app_name","version":"0.1.0"},"servers":[{"url":"http://localhost:8000","description":"Local server"}],"paths":{"/me":{"get":{"tags":["user"],"summary":"ユーザー取得","description":"ユーザー取得","operationId":"get_me","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/sign-up":{"post":{"tags":["auth"],"summary":"サインアップ","description":"サインアップ","operationId":"sign_up","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}},"400":{"description":"Email already registered","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorJsonResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorJsonResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sign-in":{"post":{"tags":["auth"],"summary":"サインイン","description":"サインイン","operationId":"sign_in","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_sign_in"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"400":{"description":"Invalid email or password","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorJsonResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorJsonResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/refresh-token":{"post":{"tags":["auth"],"summary":"トークンリフレッシュ","description":"トークンリフレッシュ","operationId":"refresh_token","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"400":{"description":"Invalid refresh token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorJsonResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorJsonResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sign-out":{"post":{"tags":["auth"],"summary":"サインアウト","description":"サインアウト","operationId":"sign_out","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JsonResponse"}}}},"400":{"description":"Invalid refresh token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorJsonResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorJsonResponse"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/chat/index":{"get":{"tags":["chat"],"summary":"チャット一覧取得","description":"チャット一覧を取得します。","operationId":"get_chats","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"cursor","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Cursor"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}},{"name":"keyword","in":"query","required":false,"schema":{"type":"string","title":"Keyword"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatIndexResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/chat/show/{uuid}":{"get":{"tags":["chat"],"summary":"チャット詳細取得","description":"チャット詳細を取得します。","operationId":"get_chat_detail","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"uuid","in":"path","required":true,"schema":{"type":"string","title":"Uuid"}},{"name":"cursor","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Cursor"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatShowResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/chat/message":{"post":{"tags":["chat"],"summary":"ユーザー用チャットメッセージ保存","description":"ユーザー用チャットメッセージを保存します。","operationId":"save_chat_message","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatSaveMessageRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JsonResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/chat/guest-message":{"post":{"tags":["chat"],"summary":"ゲスト用チャットメッセージ保存","description":"チャットメッセージを保存します。","operationId":"save_guest_chat_message","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatSaveMessageRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/chat/read":{"post":{"tags":["chat"],"summary":"チャット既読処理","description":"チャットメッセージを既読にします。","operationId":"read_chat_message","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatReadRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JsonResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/frame-chat/{uuid}":{"get":{"tags":["guest"],"summary":"チャットフレーム取得","description":"チャットフレーム取得","operationId":"get_frame_chat","parameters":[{"name":"uuid","in":"path","required":true,"schema":{"type":"string","title":"Uuid"}}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AuthResponse":{"properties":{"status":{"type":"integer","title":"Status","description":"ステータスコード","default":200},"data":{"allOf":[{"$ref":"#/components/schemas/AuthResponseItem"}],"description":"ユーザー情報"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"メッセージ","default":"ok"}},"type":"object","title":"AuthResponse"},"AuthResponseItem":{"properties":{"uuid":{"type":"string","title":"Uuid"},"account_name":{"type":"string","title":"Account Name"},"email":{"type":"string","title":"Email"},"token":{"type":"string","title":"Token"},"refresh_token":{"type":"string","title":"Refresh Token"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["uuid","account_name","email","token","refresh_token","created_at","updated_at"],"title":"AuthResponseItem","example":{"account_name":"account_name","created_at":"2022-01-01 00:00:00","email":"a@a.com","refresh_token":"xxxxxxx","token":"xxxxxxx","updated_at":"2022-01-01 00:00:00","uuid":"uuid"}},"Body_sign_in":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"password"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_sign_in"},"ChatIndexResponse":{"properties":{"status":{"type":"integer","title":"Status","description":"ステータスコード","default":200},"data":{"items":{"$ref":"#/components/schemas/ChatIndexResponseItem"},"type":"array","title":"Data","description":"チャット一覧情報"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"メッセージ","default":"ok"},"cursor":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Cursor","description":"次のページのカーソル"}},"type":"object","title":"ChatIndexResponse"},"ChatIndexResponseItem":{"properties":{"uuid":{"type":"string","title":"Uuid"},"user_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"User Id"},"user_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Name"},"corporation_uuid":{"type":"string","title":"Corporation Uuid"},"corporation_name":{"type":"string","title":"Corporation Name"},"latest_message":{"type":"string","title":"Latest Message"},"latest_send_at":{"type":"string","format":"date-time","title":"Latest Send At"},"is_read":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Read","description":"既読フラグ"}},"type":"object","required":["uuid","user_id","user_name","corporation_uuid","corporation_name","latest_message","latest_send_at"],"title":"ChatIndexResponseItem","example":{"corporation_uuid":"uuid","is_read":true,"latest_message":"Hello, World!","latest_send_at":"2022-01-01 00:00:00","user_id":1,"uuid":"uuid"}},"ChatReadRequest":{"properties":{"chat_uuid":{"type":"string","title":"チャットUUID","description":"チャットUUID"}},"type":"object","required":["chat_uuid"],"title":"ChatReadRequest"},"ChatSaveMessageRequest":{"properties":{"chat_uuid":{"type":"string","title":"チャットUUID","description":"チャットUUID"},"corporation_uuid":{"type":"string","title":"企業UUID","description":"企業UUID"},"body":{"type":"string","title":"メッセージ内容","description":"メッセージ内容"}},"type":"object","required":["chat_uuid","corporation_uuid","body"],"title":"ChatSaveMessageRequest"},"ChatShowResponse":{"properties":{"status":{"type":"integer","title":"Status","description":"ステータスコード","default":200},"data":{"items":{"$ref":"#/components/schemas/ChatShowResponseItem"},"type":"array","title":"Data","description":"チャット詳細情報"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"メッセージ","default":"ok"},"cursor":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Cursor","description":"次のページのカーソル"}},"type":"object","title":"ChatShowResponse"},"ChatShowResponseItem":{"properties":{"uuid":{"type":"string","title":"Uuid"},"body":{"type":"string","title":"Body"},"send_at":{"type":"string","format":"date-time","title":"Send At"},"sender":{"type":"integer","title":"Sender"},"user":{"anyOf":[{"$ref":"#/components/schemas/UserResponseItem"},{"type":"null"}]}},"type":"object","required":["uuid","body","send_at","sender","user"],"title":"ChatShowResponseItem","example":{"body":"Hello, World!","send_at":"2022-01-01 00:00:00","sender":1,"uuid":"uuid"}},"ErrorDetail":{"properties":{"loc":{"items":{"type":"string"},"type":"array","title":"Loc","description":"エラー箇所"},"msg":{"type":"string","title":"Msg","description":"エラーメッセージ"},"type":{"type":"string","title":"Type","description":"エラータイプ"}},"type":"object","required":["loc","msg","type"],"title":"ErrorDetail"},"ErrorJsonResponse":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ErrorDetail"},"type":"array","title":"Detail","description":"エラーメッセージ"}},"type":"object","required":["detail"],"title":"ErrorJsonResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"JsonResponse":{"properties":{"status":{"type":"integer","title":"Status","description":"ステータスコード","default":200},"data":{"title":"Data","description":"データ"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"メッセージ","default":"ok"}},"type":"object","title":"JsonResponse"},"SignUpRequest":{"properties":{"account_name":{"type":"string","title":"アカウント名","description":"アカウント名"},"email":{"type":"string","title":"メールアドレス","description":"メールアドレス"},"password":{"type":"string","title":"パスワード","description":"パスワード"}},"type":"object","required":["account_name","email","password"],"title":"SignUpRequest"},"TokenResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"},"refresh_token":{"type":"string","title":"Refresh Token"}},"type":"object","required":["access_token","refresh_token"],"title":"TokenResponse"},"UserResponse":{"properties":{"status":{"type":"integer","title":"Status","description":"ステータスコード","default":200},"data":{"allOf":[{"$ref":"#/components/schemas/UserResponseItem"}],"description":"ユーザー情報"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message","description":"メッセージ","default":"ok"}},"type":"object","title":"UserResponse"},"UserResponseItem":{"properties":{"id":{"type":"integer","title":"Id"},"uuid":{"type":"string","title":"Uuid"},"account_name":{"type":"string","title":"Account Name"},"email":{"type":"string","title":"Email"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","uuid","account_name","email","created_at","updated_at"],"title":"UserResponseItem","example":{"account_name":"name","created_at":"2022-01-01 00:00:00","email":"a@a.com","id":1,"updated_at":"2022-01-01 00:00:00","uuid":"uuid"}},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"sign-in"}}}}}}